// screens/MechanicProfileScreen.tsx
import React from 'react';
import {
  View,
  Text,
  StyleSheet,
  ScrollView,
  ImageBackground,
  TouchableOpacity,
  Image,
  Switch,
} from 'react-native';
import {
  ChevronRight,
  Camera,
  Upload,
  LogOut,
  Bell,
  MapPin,
  Car,
  MoreVertical,
} from 'lucide-react-native';

export default function MechanicProfileScreen({ navigation }: any) {
  const [notifications, setNotifications] = React.useState(true);
  const [promoOffers, setPromoOffers] = React.useState(false);

  return (
    <ImageBackground
      source={{ uri: 'https://images.unsplash.com/photo-1581092580490-4a0e3be6f9b0?w=900' }}
      style={styles.background}
      blurRadius={12}
    >
      <View style={styles.overlay} />

      <ScrollView style={styles.container} showsVerticalScrollIndicator={false}>
        {/* Header */}
        <View style={styles.header}>
          <Text style={styles.title}>Profile</Text>
          <TouchableOpacity>
            <MoreVertical size={24} color="#fff" />
          </TouchableOpacity>
        </View>

        {/* User Info Section */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Tor User Information</Text>

          <View style={styles.userCard}>
            <View style={styles.avatarContainer}>
              <View style={styles.avatar}>
                <Camera size={32} color="#888" />
              </View>
              <Text style={styles.userName}>John Doe</Text>
            </View>

            <View style={styles.infoRow}>
              <Text style={styles.label}>Mechanic Name</Text>
              <View style={styles.valueRow}>
                <Text style={styles.value}>John Doe</Text>
                <ChevronRight size={20} color="#666" />
              </View>
            </View>

            <View style={styles.infoRow}>
              <Text style={styles.label}>Workshop Name</Text>
              <Text style={styles.value}>Lpairt</Text>
            </View>

            <View style={styles.infoRow}>
              <Text style={styles.label}>Phone Hore</Text>
              <TouchableOpacity style={styles.editButton}>
                <Text style={styles.editText}>Edit</Text>
              </TouchableOpacity>
            </View>
          </View>
        </View>

        {/* Workshop Verification */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Workshop Verification</Text>
          <View style={styles.card}>
            <TouchableOpacity style={styles.uploadRow}>
              <Text style={styles.uploadText}>Opico ID</Text>
              <View style={styles.uploadButton}>
                <Upload size={18} color="#007AFF" />
                <Text style={styles.uploadButtonText}>Upload</Text>
              </View>
              <ChevronRight size={20} color="#666" />
            </TouchableOpacity>

            <TouchableOpacity style={styles.uploadRow}>
              <Text style={styles.uploadText}>Business Certificate</Text>
              <View style={styles.uploadButton}>
                <Upload size={18} color="#007AFF" />
                <Text style={styles.uploadButtonText}>Upload</Text>
              </View>
            </TouchableOpacity>
          </View>
        </View>

        {/* Preferences */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Preferences</Text>
          <View style={styles.card}>
            <TouchableOpacity style={styles.preferenceRow}>
              <MapPin size={22} color="#fff" />
              <Text style={styles.preferenceText}>Default delivery location</Text>
              <ChevronRight size={20} color="#666" />
            </TouchableOpacity>

            <TouchableOpacity style={styles.preferenceRow}>
              <Car size={22} color="#fff" />
              <Text style={styles.preferenceText}>Default vehicle types</Text>
              <ChevronRight size={20} color="#666" />
            </TouchableOpacity>

            <View style={styles.preferenceRow}>
              <Bell size={22} color="#fff" />
              <Text style={styles.preferenceText}>Notification</Text>
              <Switch
                value={notifications}
                onValueChange={setNotifications}
                trackColor={{ false: '#333', true: '#007AFF' }}
                thumbColor={notifications ? '#fff' : '#666'}
              />
            </View>

            <View style={styles.preferenceRow}>
              <Text style={styles.preferenceText}>Order updates promotional offers</Text>
              <Switch
                value={promoOffers}
                onValueChange={setPromoOffers}
                trackColor={{ false: '#333', true: '#007AFF' }}
                thumbColor={promoOffers ? '#fff' : '#666'}
              />
            </View>
          </View>
        </View>

        {/* Earnings */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Earnings</Text>
          <View style={styles.card}>
            <View style={styles.earningsRow}>
              <Text style={styles.earningsLabel}>Lifetime delivery savings</Text>
              <Text style={styles.earningsValue}>109,00</Text>
            </View>
            <View style={styles.earningsRow}>
              <Text style={styles.earningsLabel}>Total orders made</Text>
              <Text style={styles.earningsValue}>109,00</Text>
            </View>
          </View>
        </View>

        {/* Logout */}
        <TouchableOpacity style={styles.logoutButton}>
          <LogOut size={22} color="#FF3B30" />
          <Text style={styles.logoutText}>Logout</Text>
        </TouchableOpacity>

        <View style={{ height: 60 }} />
      </ScrollView>
    </ImageBackground>
  );
}

const styles = StyleSheet.create({
  background: { flex: 1 },
  overlay: { ...StyleSheet.absoluteFillObject, backgroundColor: 'rgba(0,0,0,0.7)' },
  container: { flex: 1, paddingTop: 50, paddingHorizontal: 20 },

  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 32,
  },
  title: { fontSize: 32, fontWeight: '800', color: '#fff' },

  section: { marginBottom: 32 },
  sectionTitle: {
    fontSize: 16,
    color: '#aaa',
    marginBottom: 12,
    fontWeight: '600',
  },

  card: {
    backgroundColor: 'rgba(255,255,255,0.1)',
    borderRadius: 20,
    padding: 20,
    borderWidth: 1,
    borderColor: 'rgba(255,255,255,0.1)',
  },

  userCard: {
    ...StyleSheet.absoluteFillObject,
    backgroundColor: 'rgba(255,255,255,0.1)',
    borderRadius: 20,
    padding: 24,
    borderWidth: 1,
    borderColor: 'rgba(255,255,255,0.1)',
  },
  avatarContainer: { alignItems: 'center', marginBottom: 24 },
  avatar: {
    width: 100,
    height: 100,
    borderRadius: 50,
    backgroundColor: 'rgba(255,255,255,0.15)',
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: 12,
  },
  userName: { fontSize: 24, fontWeight: '700', color: '#fff' },

  infoRow: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingVertical: 14,
    borderBottomWidth: 1,
    borderBottomColor: 'rgba(255,255,255,0.08)',
  },
  label: { color: '#aaa', fontSize: 15 },
  valueRow: { flexDirection: 'row', alignItems: 'center' },
  value: { color: '#fff', fontSize: 16, marginRight: 8 },
  editButton: {
    backgroundColor: '#007AFF',
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 20,
  },
  editText: { color: '#fff', fontWeight: '600' },

  uploadRow: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingVertical: 16,
    borderBottomWidth: 1,
    borderBottomColor: 'rgba(255,255,255,0.08)',
  },
  uploadText: { color: '#fff', fontSize: 16 },
  uploadButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: 'rgba(0,122,255,0.15)',
    paddingHorizontal: 14,
    paddingVertical: 8,
    borderRadius: 20,
    gap: 6,
  },
  uploadButtonText: { color: '#007AFF', fontWeight: '600' },

  preferenceRow: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: 16,
    borderBottomWidth: 1,
    borderBottomColor: 'rgba(255,255,255,0.08)',
  },
  preferenceText: { color: '#fff', fontSize: 16, flex: 1, marginLeft: 16 },

  earningsRow: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    paddingVertical: 14,
  },
  earningsLabel: { color: '#aaa', fontSize: 15 },
  earningsValue: { color: '#fff', fontSize: 18, fontWeight: '700' },

  logoutButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: 'rgba(255,59,48,0.15)',
    paddingVertical: 18,
    borderRadius: 30,
    marginTop: 20,
    borderWidth: 1,
    borderColor: 'rgba(255,59,48,0.3)',
  },
  logoutText: { color: '#FF3B30', fontSize: 18, fontWeight: '700', marginLeft: 12 },
});